<!DOCTYPE html>
<html>
<head>
  <title>Basic Authentication</title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
</head>
<body>

  <div class="alert-container">
    <% flash.each do |key, value| %>
      <% if value.class == ActiveModel::Errors %>
        <% value.each do |k, v| %>
          <div class="alert alert-<%= key %> alert-dismissible fade in" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
            <strong><%= k.capitalize %></strong> <%= v %>
          </div>
        <% end %>
      <% else %>
        <div class="alert alert-<%= key %> alert-dismissible fade in" role="alert">
          <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
          <%= value.capitalize %>
        </div>
      <% end %>
      <% flash.clear %>
    <% end %>
  </div>

  <% if signed_in? %>
    <nav class="navbar navbar-inverse navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">basic-authentication</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-left">
            <li class="<%= active_page(users_path) %>"><%= link_to T("users"), users_path %></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                <%= @current_user.name %> <span class="caret"></span>
              </a>
              <ul class="dropdown-menu">
                <li><%= link_to T("edit"), edit_user_path(@current_user) %></li>
                <li role="separator" class="divider"></li>
                <li><%= link_to T("sign_out"), sign_out_path, method: :delete %></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  <% end %>

  <div class="container">
    <%= yield %>
  </div>

</body>
</html>
